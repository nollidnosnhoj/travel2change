{% extends "base.html" %}{% load sekizai_tags cache staticfiles %}
{% block title %}Activity Browse{% endblock title %}
{% block styles %}
<style>
    #activity_button:hover {
		text-decoration: none;
	}

	.card-img-top {
		width: 100%;
		height: 50%;
		object-fit: cover;
	}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.7/dist/css/bootstrap-select.min.css">
{% endblock styles %}
{% block content %}

 <form method="GET" action=".">
	<div class="form-row">
		<div class="form-group col-md-9">
			<input type="text" class="form-control" name="title" id="activitybrowse_title" placeholder="Title contains.." />
		</div>
	</div>
	 <div class="form-row">
		<div class="form-group col-md-3">
			<select class="custom-select" name="region">
				<option>All Regions</option>
				{% for region in regions %}
				<option value="{{ region }}">{{ region.name }}</option>
				{% endfor %}
			</select>
		</div>
		<div class="form-group col-md-3">
			<select class="custom-select" name="categories">
				<option>All Categories</option>
				{% for cat in categories %}
				<option value ="{{ cat }}">{{ cat.name }}</option>
				{% endfor %}
			</select>
		</div>
		<div class="form-group col-md-3">
			<select class="selectpicker" name="tags" multiple>
				<option>All Tags</option>
				{% for tag in tags %}
				<option value="{{ tag }}">{{ tag.name }}</option>
				{% endfor %}
			</select>
		</div>
    </div> 
	<button type="submit" class="btn btn-primary">Browse</button>
</form>

<ul>
{% for activity in activityBrowse %}{% comment %} every 4 iterations put this in the code {% endcomment %}
{% if forloop.counter0|divisibleby:4 %}
<div class="row text-center">
{% endif %}
	<div class="col-lg-3 col-md-6 mb-4" style="padding-top:50px;">
		<a href="{{ activity.get_absolute_url }}" id="activity_button">
			<div class="card h-100">
				{% if activity.featured_photo %}
				<img class="card-img-top" src="{{ activity.featured_photo.url }}" alt="{{ activity.title }}">
				{% endif %}
				<div class="card-body">
					<h4 class="card-title" style="text-align: left; color: #30A5BC;">{{activity.title}}</h4>
					<p class="card-text" style="text-align:left; color: gray;">{{activity.host.name}}</p>
					<p class="card-text" style="text-align:left;">{{activity.region}}</p>
				</div>
			</div>
		</a>
	</div>
{% comment %} every 4 iterations put this in the code {% endcomment %}
{% if forloop.counter|divisibleby:4 or forloop.last %}
</div>
{% endif %}
{% empty %}
    <li>No activities yet.</li>
{% endfor %}
</ul>

{% endblock content %}
{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.7/dist/js/bootstrap-select.min.js"></script>
<script>
$.fn.selectpicker.Constructor.BootstrapVersion = '4';
$(document).ready(function() {
    $('.selectpicker').selectpicker({
         style: 'btn-default'
     });
})
</script>

{% endblock %}